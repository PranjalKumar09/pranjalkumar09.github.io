---
layout: base
---

<!-- Intro Header with dynamic background and title -->
<header class="intro-header text-center text-white d-flex align-items-center" style="background: linear-gradient(135deg, #2c3e50, #3498db);">
  <div class="container">
    <h1 class="intro-title">{{ page.title | default: site.title | default: 'My Article Hub' }}</h1>
    {% if page.subtitle or site.subtitle %}
    <p class="intro-subtitle">{{ page.subtitle | default: site.subtitle | default: 'Your source for insightful articles' }}</p>
    {% endif %}
  </div>
</header>

<!-- Search Bar -->
<section class="search-section container my-4">
  <div class="search-bar input-group">
    <input type="text" id="search-input" class="form-control" placeholder="Search articles..." aria-label="Search articles">
    <button class="btn btn-primary" type="button" id="search-button">
      <i class="fas fa-search"></i>
    </button>
  </div>
  <div id="search-results" class="search-results mt-3"></div>
</section>

<!-- Main Content -->
<main class="{% if page.full-width %} container-fluid {% else %} container-md {% endif %} py-4">
  {% if page.before-content %}
    <div class="before-content mb-4">
      {% for file in page.before-content %}
        {% include {{ file }} %}
      {% endfor %}
    </div>
  {% endif %}

  {{ content }}

  {% if page.after-content %}
    <div class="after-content mt-4">
      {% for file in page.after-content %}
        {% include {{ file }} %}
      {% endfor %}
    </div>
  {% endif %}
</main>

<!-- JavaScript for Search Functionality -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const searchInput = document.getElementById('search-input');
  const searchButton = document.getElementById('search-button');
  const searchResults = document.getElementById('search-results');

  // Sample article data (replace with actual data from your site)
  const articles = [
    {% for post in site.posts %}
    {
      title: "{{ post.title | escape }}",
      url: "{{ post.url | absolute_url }}",
      excerpt: "{{ post.excerpt | strip_html | truncate: 100 }}",
      tags: [{% for tag in post.tags %}"{{ tag }}",{% endfor %}]
    },
    {% endfor %}
  ];

  function displayResults(results) {
    searchResults.innerHTML = '';
    if (results.length === 0) {
      searchResults.innerHTML = '<p class="text-muted">No results found.</p>';
      return;
    }
    results.forEach(article => {
      const resultItem = document.createElement('div');
      resultItem.className = 'search-result-item p-3 mb-2 bg-light rounded';
      resultItem.innerHTML = `
        <h3 class="h5"><a href="${article.url}" class="text-primary">${article.title}</a></h3>
        <p class="text-muted">${article.excerpt}</p>
        <p class="small text-muted">Tags: ${article.tags.join(', ')}</p>
      `;
      searchResults.appendChild(resultItem);
    });
  }

  function searchArticles(query) {
    const lowerQuery = query.toLowerCase();
    return articles.filter(article =>
      article.title.toLowerCase().includes(lowerQuery) ||
      article.excerpt.toLowerCase().includes(lowerQuery) ||
      article.tags.some(tag => tag.toLowerCase().includes(lowerQuery))
    );
  }

  searchInput.addEventListener('input', () => {
    const query = searchInput.value.trim();
    displayResults(searchArticles(query));
  });

  searchButton.addEventListener('click', () => {
    const query = searchInput.value.trim();
    displayResults(searchArticles(query));
  });
});
</script>

<style>
/* Intro Header Styles */
.intro-header {
  min-height: 200px;
  background-size: cover;
  background-position: center;
  padding: 2rem;
}
.intro-title {
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
}
.intro-subtitle {
  font-size: 1.2rem;
  font-weight: 400;
  opacity: 0.9;
}

/* Search Bar Styles */
.search-section {
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}
.search-bar {
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}
.search-bar input {
  border-radius: 4px 0 0 4px;
}
.search-bar button {
  border-radius: 0 4px 4px 0;
  background-color: #3498db;
}
.search-result-item {
  transition: background-color 0.2s ease;
}
.search-result-item:hover {
  background-color: #e9ecef;
}

/* Main Content Styles */
main {
  background: #ffffff;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  padding: 2rem;
}

/* Dark Mode Styles */
.dark-mode .intro-header {
  background: linear-gradient(135deg, #252537, #60a5fa);
}
.dark-mode main {
  background: #2a2a3a;
  color: #d0d0e0;
}
.dark-mode .search-bar {
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}
.dark-mode .search-bar input {
  background: #3a3a4a;
  color: #d0d0e0;
  border: 1px solid #4a4a5a;
}
.dark-mode .search-bar button {
  background: #60a5fa;
}
.dark-mode .search-result-item {
  background: #3a3a4a;
  color: #d0d0e0;
}
.dark-mode .search-result-item:hover {
  background: #4a4a5a;
}
.dark-mode .search-result-item a {
  color: #93c5fd;
}
.dark-mode .search-result-item a:hover {
  color: #60a5fa;
}

/* Responsive Design */
@media (max-width: 768px) {
  .intro-header {
    min-height: 150px;
  }
  .intro-title {
    font-size: 1.8rem;
  }
  .intro-subtitle {
    font-size: 1rem;
  }
  main {
    padding: 1rem;
  }
}
</style>